## 网络核心

网络核心，即互联了因特网端系统的分组交换机和链路的网状网络。

**报文（message）**: 端系统彼此交换信息的术语。报文可以执行一种控制功能，也可以包含数据（例如：电子邮件，JPEG图像文件等）。

**分组（packet）**：从源端系统向目的端系统发送一个报文，源将长报文划分为较小的数据块，称之为分组。例子：打游戏丢包，其实就是所谓的数据块。


通过网络链路和交换机移动数据有两种基本方法：

### 1.分组交换（packet swiitching）
在源和目的之间，每个分组通过**通信链路**和**分组交换机（packet switch）** 。

交换器有两类：**路由器**和**链路层交换机 **。

- #### 存储转发传输（store-and-forward transmission）
交换机能够开始向输出链路传输该分组的第一个比特之前，必须接收到整个分组。


**重点**：N条速率均为R，长度为L的链路构成的路径（所以再源和目的地之间有N-1太路由器），端到端的时延是：
![端到端的时延公式](https://github.com/SolerHo/Computer-Network-A-Top-Down-Approach-Notebook/blob/master/Chapter01/Images/%E7%AB%AF%E5%88%B0%E7%AB%AF%E7%9A%84%E6%97%B6%E5%BB%B6%E5%85%AC%E5%BC%8F.png)

- #### 排队时延和分组丢失

**输出缓存（output buffer）(也称为输出队列 output queue)**: 当分组需要经过的那条链路繁忙时（传输其他分组中），那么该分组可以在输出缓存上等待。用于存储路由器准备发往那条链路的分组。

**排队时延（queue delay）**: 在输出缓存等待的时延；除此之外，还有之前提到的存储转发时延。

**分组丢失（丢包）(packet lost)**：到达的分组可能发现缓存已经被其他等待的分组完全充满了，这种情况下就会出现丢包。


在因特网中，每个端系统具有一个称为IP地址的地址。源在分组的首部包含了目的地的IP地址。路由器会检查目的地址的一部分，并向相邻的路由器转发该分组。

**转发表（forwarding table）**: 用于将目的地址（或目的地址的一部分）映射成输出链路。

**路由选择协议 （routing protocal）**： 可以实现路由的特殊功能，例如：自动设置转发表来选择通往目的地的最短路径。

### 2.电路交换（circuit switching）

**电路交换（circuit switching）**网络必须在发送发和接受方之间的交换机需要为该连接维护为连接状态。该连接用电话的术语被称为一条**电路**。

电路交换的复用技术：指的是如何复用链路服务于多个连接，构建电路的技术。

主要有**频分复用（Frequency-Division Multiplexing, FDM）** 和**时分复用（Time-Division Multiplexing, TDM）**。

简单来说，在不同频率上连接多个电路的称为FDM，而基于一定时间间隔为所有连接打开通路的被称为时分复用。

![](https://github.com/SolerHo/Computer-Network-A-Top-Down-Approach-Notebook/blob/master/Chapter01/Images/%E5%88%86%E7%BB%84%E5%92%8C%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2.png)

对于FDM，每条电路连续地得到部分宽带。链路的频谱由跨越链路创建的所有连接所共享。

对于TDM，每条电路在短时间间隔（即时隙）中周期性地得到所有带宽。


#### 分组交换与电路交换的对比
- **分组交换**
    - 不适合实时服务。
    - 提供了更好的宽带共享
    - 更简单，更有效，使得成本更低。
    - 分组交换的性能优于电路交换的性能。
    - 按需分配链路使用，链路传输能力将在所有用户之间逐分组地被共享。
    
- **电路交换**
    - 不需要考虑需求，而预先分配传输链路的使用，使得已分配而并不需要的链路时间未被利用。
   

